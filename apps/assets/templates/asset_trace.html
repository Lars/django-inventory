{% extends "generic_detail.html" %}
{% load i18n %}
{% load styling %}
{% load generic_views_helpers %}
{% block title %} :: {% trans "Asset Trace" %}{% endblock %}

{% block content %}
    <div id="subform">
        {% with "true" as read_only %}
            {% if side_bar %}
		<div class="block">
		<h3>
	    {% else %}
		<div class="content">
		<h2 class="title">
	    {% endif %}

{% include "calculate_form_title.html" %}

{% if side_bar %}
    </h3>
    <div class="content">
        <p>
{% else %}
    </h2>
    <div class="inner">
{% endif %}

    <form method="{{ submit_method|default:'post' }}" action="" class="form">

        {% if submit_method != 'GET' and submit_method != 'get' %}
            {% csrf_token %}
        {% endif %}

        {% for hidden_field in hidden_fields %}
           {{ hidden_field.as_hidden }}
        {% endfor %}

	{{ form.media|safe }}
	{% add_classes_to_form form %}

	{% if form.non_field_errors %}
	<div class="flash">
		{% for value in form.non_field_errors %}
		<div class="message error">
			<p>{{ value }}</p>
		</div>
		{% endfor %}
	</div>
	{% endif %}

	<table width="100%">
	<tr><td colspan="2" width="100%">{% with form.item_template as field %}{% include "asset_field.html" %}{% endwith %}</td>
	</tr>
	<tr><td width="50%">{% with form.serial_number as field %}{% include "asset_field.html" %}{% endwith %}</td>
	    <td width="50%">{% with form.property_number as field %}{% include "asset_field.html" %}{% endwith %}</td>
	</tr>
	<tr><td colspan="2">{% with form.location as field %}{% include "asset_field.html" %}{% endwith %}</td>
	</tr>
        <tr><td colspan="2">{% with form.movements as field and 1 as always_visible %}{% include "asset_field.html" %}{% endwith %}</td>
	<tr> <td colspan="2">{% with form.notes as field %}{% include "asset_field.html" %}{% endwith %}</td>
	</tr>
	</table>

    </form>
    {% if sidebar %}
        </p></div></div>
    {% else %}
        </div></div>
    {% endif %}

    </div>
{% endwith %}

    {% for subtemplate in subtemplates %}
        {% include subtemplate %}
    {% endfor %}

    {% for subtemplate in subtemplates_dict %}
    {% with subtemplate.title as title %}
    {% with subtemplate.object_list as object_list %}
    {% with subtemplate.extra_columns as extra_columns %}
    {% with subtemplate.hide_object as hide_object %}
    {% with subtemplate.main_object as main_object %}
        {% include subtemplate.name %}
    {% endwith %}
    {% endwith %}
    {% endwith %}
    {% endwith %}
    {% endwith %}
    {% endfor %}

    
{% endblock %}

